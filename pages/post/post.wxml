<!--pages/post/post.wxml-->
<view class="main">
    <view class="img-swiper">
        <swiper class="swiper-body" indicator-dots="{{post.images.length >= 1}}" autoplay="false" duration="500">
            <swiper-item wx:for="{{post.images}}" wx:key="url">
                <view class="swiper-item">
                    <image src="{{item}}" mode="widthFix"></image>
                </view>
            </swiper-item>
        </swiper>
    </view>

    <view class="main-body">
        <!-- User Info -->
        <view class="user-info mb-med mr-max">
            <view class="user-image">
                <image src="{{post.user_avatar}}" mode="widthFix"></image>
            </view>
            <view class="username">
                <text>{{post.user_name}}</text>
            </view>
            <view class="post-time">
                <text>{{post.time}}</text>
            </view>
        </view>

        <!-- Content -->
        <view class="content ml-max mr-max mb-max">
            <view class="title mb-med">{{post.title}}</view>
            <view class="content mb-med">
                <text>{{post.content}}</text>
            </view>
            
            <view class="other-info">
                <!-- 标签 -->
                <view class="label-box">
                    <view class="label" wx:for="{{post.label}}" wx:key="index">
                        <text>{{item}}</text>
                    </view>
                </view>
                <view class="location-box mr-max">
                    <view class="location">
                        <image src="../../statics/imgs/community/post/location.png" mode="widthFix"></image>
                        <text>{{post.location}}</text>
                    </view>
                </view>
            </view>
        </view>

        <!-- Make comments -->
        <view class="make-comment ml-med mr-med mb-max">
            <view class="search">
                <view class="search_in">
                    <image src="../../statics/imgs/community/avatar2.jpg" mode="widthFix"></image>

                    <input type="text" placeholder="发表评论"  placeholder-class="mid-make-comment"/>
                </view>
            </view>
        </view>

        <!-- Comments -->
        <view class="comments ml-med mr-med mb-med">
            <view wx:for="{{comments}}" wx:key="id" class="comment">
                <view class="parent-comment">
                    <view class="comment-avatar">
                        <image src="{{item.parent.user_avatar}}" mode="widthFix"></image>
                    </view>
                    <view class="comment-user-info">
                        <view class="comment-username">
                            <text>{{item.parent.user_name}}</text>
                        </view>
                        <view class="comment-upvotes mr-min">
                            <image src="../../statics/imgs/community/post/upvote_selected.png" mode="widthFix"></image>
                            <text>{{item.parent.num_upvotes}}</text>
                        </view>
                    </view>
                    <view class="comment-content mb-min">
                        <text>{{item.parent.content}}</text>
                    </view>
                    <view class="comment-bottom">
                        <view class="comment-time">
                            <text>{{item.parent.time}}</text>
                        </view>
                        <view class="comment-reply">
                            <text>Reply</text>
                        </view>
                    </view>
                </view>

                <view class="child-comments">
                    <view wx:for="{{item.children}}" wx:key="id" class="child-comment">
                        <view class="comment-avatar">
                            <image src="{{item.user_avatar}}" mode="widthFix"></image>
                        </view>
                        <view class="comment-user-info">
                            <view class="comment-username">
                                <text>{{item.user_name}}</text>
                            </view>
                            <view class="comment-upvotes mr-min">
                                <image src="../../statics/imgs/community/post/upvote_selected.png" mode="widthFix"></image>
                                <text>{{item.num_upvotes}}</text>
                            </view>
                        </view>
                        <view class="comment-content mb-min">
                            <text>{{item.content}}</text>
                        </view>
                        <view class="comment-bottom">
                            <view class="comment-time">
                                <text>{{item.time}}</text>
                            </view>
                            <view class="comment-reply">
                                <text>Reply</text>
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </view>

        <view class="main-body-padding"></view>
    </view>

    <view class="tabbar_box" style="background-color:{{tabbar.backgroundColor}}">
        <view class="tabbar_nav ml-med mr-med" hover-class="none" open-type="switchTab">
            <view class="tabbar-comment">
                <view class="tabbar-comment_in">
                    <input type="text" placeholder="发表评论" placeholder-class="tabbar-make-comment"/>
                </view>
            </view>

            <view class="tabbar-reaction-box">
                <view class="tabbar-reaction-item ">
                    <image src="../../statics/imgs/community/post/upvote_selected.png" mode="widthFix"></image>
                    <text>{{post.num_upvotes}}</text>
                </view>
                <view class="tabbar-reaction-item">
                    <image src="../../statics/imgs/community/post/comment.png" mode="widthFix"></image>
                    <text>{{post.num_comments}}</text>
                </view>
                <view class="tabbar-reaction-item">
                    <image src="../../statics/imgs/community/post/star.png" mode="widthFix"></image>
                    <text>{{post.num_stars}}</text>
                </view>
            </view>
        </view>
    </view>
</view>